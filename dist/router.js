(function(){const n=window.SCRIPT_BASE_URL?window.SCRIPT_BASE_URL:location.hostname.includes(".webflow.io")?"http://localhost:3000/src":"https://mtnsmade.github.io/mtns-made",i=o=>new Promise((t,r)=>{if(document.querySelector(`script[data-script-id="${o}"]`)){console.log(`Script already loaded: ${o}`),t();return}const e=document.createElement("script");e.src=`${n}/${o}.js`,e.dataset.scriptId=o,e.async=!0,e.onload=()=>{console.log(`Loaded: ${o}`),t()},e.onerror=()=>{console.error(`Failed to load: ${o}`),r(new Error(`Failed to load script: ${o}`))},document.body.appendChild(e)}),s=o=>new Promise((t,r)=>{if(document.querySelector(`link[data-style-id="${o}"]`)){console.log(`Style already loaded: ${o}`),t();return}const e=document.createElement("link");e.rel="stylesheet",e.href=`${n}/${o}.css`,e.dataset.styleId=o,e.onload=()=>{console.log(`Loaded style: ${o}`),t()},e.onerror=()=>{console.error(`Failed to load style: ${o}`),r(new Error(`Failed to load style: ${o}`))},document.head.appendChild(e)}),l=async()=>{console.log("Script Router initialized"),console.log("Base URL:",n),console.log("Environment:",location.hostname.includes(".webflow.io")?"Development":"Production");try{if(window.globalScripts&&window.globalScripts.length>0){console.log("Loading global scripts:",window.globalScripts);for(const o of window.globalScripts)await i(`scripts/${o}`)}if(window.pageScript&&(console.log("Loading page script:",window.pageScript),await i(`scripts/${window.pageScript}`)),window.pageScripts&&Array.isArray(window.pageScripts)){console.log("Loading page scripts:",window.pageScripts);for(const o of window.pageScripts)await i(`scripts/${o}`)}if(window.pageStyles){const o=Array.isArray(window.pageStyles)?window.pageStyles:[window.pageStyles];for(const t of o)await s(`styles/${t}`)}console.log("All scripts loaded successfully"),window.dispatchEvent(new CustomEvent("scriptsLoaded",{detail:{baseUrl:n,environment:location.hostname.includes(".webflow.io")?"dev":"prod"}}))}catch(o){console.error("Script Router Error:",o)}};window.ScriptRouter={loadScript:i,loadStyle:s,baseUrl:n,environment:location.hostname.includes(".webflow.io")?"dev":"prod"},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})();
